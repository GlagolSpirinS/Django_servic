{% load static %}

    <link rel="stylesheet" href="{% static 'css/base.css' %}">

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}CompDog{% endblock %}</title>


    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=person" />

    <style>
        /* Дополнительный стиль для кнопок в навигации, если нужно */
        .navbar .btn {
            padding: 0.5rem 1rem;
        }
    </style>
</head>
<body>
        <!-- Header -->
    <header>
        <div class="container header-container">
            <div class="logo">CompDog</div>
            <nav>
                <ul>
                    <li><a href="/">Главная</a></li>
                    <li><a href="/catalog/">Каталог</a></li>
                    <li><a href="/contact/">О нас</a></li>
                    <li><a href="/request/">Заявка</a></li>
                    <li><a href="/article/">Статьи</a></li>
                </ul>
            </nav>



        {% if user.is_authenticated %}

    <li class="auth-buttons">
        <!-- Кнопка-иконка профиля -->
        
        <form action="/profile/" method="post" style="display: inline;">
            {% csrf_token %}
            <button type="submit" class="btn btn-outline btn-icon">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
            </button>
        </form>

        <!-- Форма выхода -->
        <form action="/logout/" method="post" style="display: inline;">
            {% csrf_token %}
            <button type="submit" class="btn btn-outline">Выход</button>
        </form>


        {% if user.is_staff or user.role == 'admin' or user.role == 'manager' or user.role == 'engineer' %}
            <form action="/system/request/" method="post" style="display: inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-outline">Админские стринги</button>
            </form>
        {% endif %}
        
    </li>
            {% else %}
            <div class="auth-buttons">
                <form action="/auth/login/">
                <button class="btn btn-outline">Вход</button>
                </form>
                <form action="/auth/register/">
                <button class="btn btn-primary">Регистрация</button>
                </form>
            </div>
        {% endif %}


        </div>
    </header>

    <main class="container mt-4">
        {% block content %}
        {% endblock %}
    </main>

    <!-- Подключение JS Bootstrap 5 (с bundle, включает Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>

    <!-- Скрипты для отладки авторизации -->
    {% if user.is_authenticated %}
        <script>
            console.log("Пользователь авторизован.");
            console.log("Имя пользователя:", "{{ user.username }}");
            console.log("Email:", "{{ user.email }}");
        </script>
    {% else %}
        <script>
            console.log("Пользователь не авторизован.");
        </script>
    {% endif %}
</body>
</html>


    <footer>
        <div class="container footer-content">
            <div class="footer-logo">CompDog</div>
            <p>©Сервисный центр по ремонту компьютеров и сборке ПК</p>
        </div>
    </footer>